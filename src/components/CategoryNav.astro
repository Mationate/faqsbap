---
import type { FaqCategory } from '../data/faq';

interface Props {
  categories: FaqCategory[];
  mobile?: boolean;
}

const { categories, mobile = false } = Astro.props;
---

{!mobile && (
  <!-- Desktop sidebar -->
  <nav class="hidden lg:block sticky top-20 self-start" aria-label="Categorías">
    <p class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 px-4">
      Categorías
    </p>
    <ul class="space-y-0.5" id="nav-desktop">
      {categories.map(cat => (
        <li>
          <a
            href={`#${cat.id}`}
            class="nav-link flex items-center gap-2.5"
            data-nav-category={cat.id}
          >
            <span class="w-5 h-5 shrink-0 text-current" aria-hidden="true" set:html={cat.icon} />
            <span class="truncate">{cat.title}</span>
            <span class="ml-auto text-xs text-gray-400 shrink-0">{cat.questions.length}</span>
          </a>
        </li>
      ))}
    </ul>
  </nav>
)}

{mobile && (
  <!-- Mobile horizontal pills (rendered outside main to avoid iOS sticky+overflow bug) -->
  <div class="lg:hidden sticky top-16 z-40 w-full bg-stone-50/95 backdrop-blur-sm border-b border-gray-200" id="nav-mobile-container">
    <div class="flex gap-2 overflow-x-auto py-2.5 px-4 sm:px-6 scrollbar-hide" id="nav-mobile">
      {categories.map(cat => (
        <a
          href={`#${cat.id}`}
          class="category-pill whitespace-nowrap shrink-0 inline-flex items-center gap-2"
          data-nav-category={cat.id}
        >
          <span class="w-4 h-4 shrink-0 text-current" aria-hidden="true" set:html={cat.icon} />
          <span>{cat.title.split(' ')[0].replace(/[,;.]$/, '')}</span>
        </a>
      ))}
    </div>
  </div>
)}
